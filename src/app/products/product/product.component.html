<div (click)="routing(product().id)"
  class="group overflow-hidden border border-gray-200 rounded-2xl transition-all duration-300 hover:shadow-xl bg-white hover:border-gray-300">
  <!-- Product Image -->
  <a class="block relative">
    <div class="aspect-square overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100 relative">
      <img [src]="product().image" appImageAspectRatio="1/1" objectFit="cover"
        class="h-full w-full transition-transform duration-500 group-hover:scale-110" />
      <!-- Favorite Badge (Top Right) -->

    </div>
  </a>

  <!-- Product Content -->
  <div class="p-5">
    <a class="block">
      <!-- Category Badge -->
      <span
        class="inline-flex items-center rounded-full bg-blue-100 px-3 py-1 text-xs font-semibold text-blue-800 mb-3 border border-blue-200">
        {{product().category}}
      </span>

      <!-- Product Name -->
      <h3 class="font-bold text-lg mb-2 line-clamp-1 group-hover:text-blue-600 transition-colors duration-300">
        {{product().name}}
      </h3>

      <!-- Product Description -->
      <p class="text-sm text-gray-600 line-clamp-2 mb-4 leading-relaxed">
        {{ product().description}}
      </p>
    </a>

    <!-- Rating & Reviews -->
    <div class="flex items-center gap-2 mb-4">
      <div class="flex items-center gap-1">
        <svg class="h-4 w-4 fill-yellow-400 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
          <path
            d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
        </svg>
        <span class="text-sm font-semibold text-gray-900">{{product().rating}}</span>
      </div>
      <span class="text-sm text-gray-500">({{product().reviews}} reviews)</span>
    </div>

    <!-- Price & Actions -->
    <div class="flex items-center justify-between mb-4" (click)="routing(product().id)">
      <span class="text-2xl font-bold text-blue-600">${{product().price}}</span>
    </div>

    <!-- Action Buttons -->
    <div class="flex gap-2" (click)=" $event.stopPropagation()">
      <!-- Add to Cart Button -->
      <button (click)="onAddToCart(product())"
        class="flex-1 inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-semibold transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-blue-600 text-white hover:bg-blue-700 hover:shadow-lg h-11 px-4 py-2">
        <svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
        </svg>
        Add to Cart
      </button>

      <!-- Favorite Button -->
      <button (click)="toggleFavorite() "
        class="inline-flex items-center justify-center rounded-xl p-3 border transition-all duration-300 group relative overflow-hidden min-w-12"
        [class.bg-red-50]="isFavorite()" [class.border-red-200]="isFavorite()" [class.bg-white]="!isFavorite()"
        [class.border-gray-300]="!isFavorite()" [class.hover:bg-red-100]="isFavorite()"
        [class.hover:bg-gray-50]="!isFavorite()" [class.hover:border-red-300]="isFavorite()"
        [class.hover:border-gray-400]="!isFavorite()">
        <!-- Heart Icon -->
        <svg class="h-5 w-5 transition-all duration-300" [class.text-red-500]="isFavorite()"
          [class.scale-110]="isFavorite()" [class.text-gray-500]="!isFavorite()"
          [class.group-hover:text-red-500]="!isFavorite()" [class.group-hover:scale-110]="!isFavorite()"
          [class.fill-red-500]="isFavorite()" [class.fill-transparent]="!isFavorite()" stroke="currentColor"
          viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
        </svg>

        <!-- Pulse Effect when favorite -->
        <div *ngIf="isFavorite()" class="absolute inset-0 border-2 border-red-300 rounded-xl opacity-0 animate-ping">
        </div>

        <!-- Tooltip -->
        <div
          class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-300 whitespace-nowrap pointer-events-none shadow-lg">
          {{ isFavorite() ? 'Remove from favorites' : 'Add to favorites' }}
        </div>
      </button>
    </div>
  </div>
</div>