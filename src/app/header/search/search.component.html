<div class="relative w-80 mx-auto">
    <!-- Search Input -->
    <div class="relative">
        <input type="text" placeholder="Search products..." [(ngModel)]="searchInput" (ngModelChange)="search()"
            class="w-full h-12 pl-12 pr-4 bg-white/90 backdrop-blur-sm border border-gray-200 rounded-2xl text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all duration-300 shadow-sm hover:shadow-md" />
        <!-- Search Icon -->
        <div class="absolute left-4 top-1/2 transform -translate-y-1/2">
            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
        </div>
    </div>

    <!-- Search Results -->
    @if(searchInput && filteredProducts.length > 0){
    <div
        class="absolute top-14 left-0 w-full bg-white/95 backdrop-blur-md shadow-xl border border-gray-100 rounded-2xl max-h-80 overflow-y-auto z-50 animate-in fade-in slide-in-from-top-2 duration-300 ">
        <!-- Results Header -->
        <div class="sticky top-0 bg-white/95 backdrop-blur-sm border-b border-gray-100 px-4 py-3 z-100">
            <div class="flex justify-between items-center">
                <span class="text-sm font-semibold text-gray-700">Search Results</span>
                <span class="text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full">
                    {{filteredProducts.length}} found
                </span>
            </div>
        </div>

        <!-- Products List -->
        <div class="p-2">
            @for(product of filteredProducts; track product.id){
            <div class="flex items-center gap-3 p-3 rounded-xl hover:bg-blue-50 cursor-pointer transition-all duration-200 group border border-transparent hover:border-blue-100"
                (click)="routing(product.id)">
                <!-- Product Image -->
                <div class="flex-shrink-0 relative z-0">
                    <img [src]="product.image" [alt]="product.name"
                        class="w-12 h-12 object-cover rounded-lg border border-gray-200 group-hover:border-blue-200 transition-colors" />
                </div>

                <!-- Product Info -->
                <div class="flex-1 min-w-0">
                    <h4
                        class="text-sm font-semibold text-gray-900 truncate group-hover:text-blue-700 transition-colors">
                        {{ product.name }}
                    </h4>
                    <p class="text-xs text-gray-500 mt-0.5">{{ product.category }}</p>
                </div>

                <!-- Price -->
                <div class="flex-shrink-0 text-right">
                    <span class="text-sm font-bold text-blue-600">
                        ${{ product.price }}
                    </span>
                    <div class="flex items-center justify-end mt-1">
                        <svg class="w-3 h-3 text-yellow-400 fill-current" viewBox="0 0 20 20">
                            <path
                                d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                        <span class="text-xs text-gray-400 ml-1">{{ product.rating }}</span>
                    </div>
                </div>
            </div>
            }
        </div>

        <!-- View All Results -->
        <div class="sticky bottom-0 bg-white/95 backdrop-blur-sm border-t border-gray-100 p-3">
            <button class="w-full text-center text-sm text-blue-600 font-medium hover:text-blue-700 transition-colors">
                View all results â†’
            </button>
        </div>
    </div>
    }

    <!-- No Results -->
    @if(searchInput && filteredProducts.length === 0){
    <div
        class="absolute top-14 left-0 w-full bg-white/95 backdrop-blur-md shadow-xl border border-gray-100 rounded-2xl p-6 text-center z-50 animate-in fade-in slide-in-from-top-2 duration-300">
        <div class="w-16 h-16 mx-auto mb-3 bg-gray-100 rounded-full flex items-center justify-center">
            <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
        </div>
        <p class="text-gray-700 font-medium mb-1">No products found</p>
        <p class="text-sm text-gray-500">Try different keywords or categories</p>
    </div>
    }
</div>